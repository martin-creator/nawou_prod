import{K as L,m as k,r as u,j as e,L as w,A as M}from"./app-DH5o8IYu.js";import{D as B}from"./data-table-cgjqCbXD.js";import{E as K}from"./empty-state-B3W3qtNm.js";import{A as O,a as q,b as z,c as F,d as P,e as I,f as $,g as H,E as U,P as V}from"./alert-dialog-BdgBGS1G.js";import{B as x}from"./button-BdQDpV3Z.js";import{D as R,a as G,b as J,c as Q}from"./dialog-BhPclIIs.js";import{I as v}from"./input-Dn46T836.js";import{L as h}from"./label-BU5T7TkJ.js";import{T as W}from"./textarea-BpCUXJWm.js";import{A as X}from"./layout-CyoEJGoG.js";import{A as Y}from"./app-layout-CQ0AETpo.js";import{D as Z,a as ee,b as se,c as D,d as te}from"./dropdown-menu-CLJbZR0I.js";import{T as ae,a as ie,b as re,c as ne}from"./tooltip-Du8cFeyp.js";import{t as l}from"./sonner-B0VlLR5N.js";import{C as b}from"./circle-plus-CmY6TQG7.js";import{L as C}from"./loader-circle-i3RD8S8C.js";import{T as le}from"./trash-2-NWU3BuHZ.js";/* empty css            */import"ziggy-js";import"./index-D5X5_gsJ.js";import"./index-CNncZS_b.js";import"./index-Cb0gIXTF.js";import"./index-DOZPO_ue.js";import"./index-x6vK-Jls.js";import"./use-mobile-DBp9Z0jL.js";import"./chevron-right-Bvj8k7W_.js";import"./index-Cpx0AJM2.js";import"./index-ByZUqap7.js";const oe=[{title:"Dashboard",href:"/panel"},{title:"Testimonies",href:"/panel/about/testimonies"}];function qe(){const{testimonies:c}=L().props,{data:j,setData:o,post:T,processing:a,reset:d,patch:N,delete:A}=k({person_name:"",person_title:"",person_avatar:null,message:""}),[_,r]=u.useState(!1),[S,f]=u.useState(!1),[n,g]=u.useState(null),[m,p]=u.useState(null),y=s=>{s.preventDefault(),m?N(route("testimonies",{id:m}),{onSuccess:()=>{l.success("Testimony updated successfully!"),r(!1),d()},onError:t=>{for(const i in t)l.error(`${i} error`,{description:t[i],closeButton:!0,className:"capitalize"})},onFinish:()=>{g(null),p(null)}}):n?A(route("testimonies",{id:n==null?void 0:n.id}),{onSuccess:()=>{l.success("Testimony deleted successfully!"),r(!1),d(),f(!1)},onError:t=>{for(const i in t)l.error(`${i} error`,{description:t[i],closeButton:!0,className:"capitalize"})},onFinish:()=>{g(null),p(null)}}):T(route("testimonies"),{onSuccess:()=>{l.success("Testimony added successfully!"),r(!1),d()},onError:t=>{for(const i in t)l.error(`${i} error`,{description:t[i],closeButton:!0,className:"capitalize"})}})},E=[{accessorKey:"id",header:()=>e.jsx("div",{className:"text-center",children:"#"}),cell:({row:s})=>e.jsxs("div",{className:"text-center font-medium",children:[s.index+1,"."]})},{accessorKey:"person_name",header:()=>e.jsx("div",{className:"text-left",children:"Name"}),cell:({row:s})=>{var t;return e.jsxs("div",{className:"flex cursor-pointer items-center gap-2",children:[e.jsx("img",{src:(t=s.original)==null?void 0:t.person_avatar,alt:"",className:"h-10 w-10 rounded-lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-left font-medium",children:s.original.person_name}),e.jsx("div",{className:"text-left",children:s.original.person_title})]})]})}},{accessorKey:"message",header:()=>e.jsx("div",{className:"text-left",children:"Testimony"}),cell:({row:s})=>{var t;return e.jsx(ae,{children:e.jsxs(ie,{children:[e.jsx(re,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer truncate text-left",children:(t=s.getValue("message"))==null?void 0:t.substring(0,50)})}),e.jsx(ne,{className:"max-h-[250px] overflow-auto p-3",children:e.jsx("p",{children:s.getValue("message")})})]})})}},{accessorKey:"updated_at",header:()=>e.jsx("div",{className:"text-left",children:"Last Updated"}),cell:({row:s})=>e.jsx("div",{className:"text-left font-medium",children:new Date(s.original.updated_at).toLocaleString()})},{id:"actions",enableHiding:!0,cell:({row:s})=>e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(x,{variant:"outline",className:"h-5 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(U,{})]})}),e.jsxs(se,{align:"end",children:[e.jsxs(D,{onClick:()=>{o(s.original),p(s.original.id),r(!0)},children:[e.jsx(V,{}),"Edit"]}),e.jsx(te,{}),e.jsxs(D,{onClick:()=>{g(s.original),f(!0)},children:[e.jsx(le,{}),"Delete"]})]})]})}];return e.jsxs(Y,{breadcrumbs:oe,children:[e.jsx(w,{title:"Testimonies"}),e.jsxs(X,{children:[e.jsx("div",{className:"flex flex-col gap-4 p-4",children:e.jsx(M,{data:"testimonies",fallback:"Loading...",children:(c==null?void 0:c.length)>0?e.jsx(B,{columns:E,data:c,searchableColumn:"person_name",placeholder:"Search person name...",type:"testimonies",actions:e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>{r(!0)},children:[e.jsx(b,{})," Create"]})}):e.jsx(K,{actions:e.jsxs(x,{variant:"outline",onClick:()=>r(!0),children:[e.jsx(b,{})," Create New"]})})})}),e.jsx(R,{open:_,onOpenChange:s=>{r(s),s==!1&&(d(),p(null))},children:e.jsxs(G,{children:[e.jsxs(J,{children:[m?"Editing":"Add"," Testimony"]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Name"}),e.jsx(v,{type:"text",disabled:a,value:j.person_name,onChange:s=>o("person_name",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Title"}),e.jsx(v,{type:"text",disabled:a,value:j.person_title,onChange:s=>o("person_title",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Avatar"}),e.jsx(v,{type:"file",accept:"image/*",disabled:a,onChange:s=>o("person_avatar",s.target.files[0]),required:!m})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Testimony"}),e.jsx(W,{type:"text",disabled:a,value:j.message,onChange:s=>o("message",s.target.value),required:!0})]}),e.jsx(Q,{children:e.jsxs(x,{type:"submit",disabled:a,children:[a&&e.jsx(C,{className:"h-4 w-4 animate-spin"}),"Submit"]})})]})]})}),e.jsx(O,{open:S,onOpenChange:f,children:e.jsxs(q,{children:[e.jsxs(z,{children:[e.jsxs(F,{children:['Delete "',e.jsx("b",{children:n==null?void 0:n.person_name}),'"?']}),e.jsx(P,{children:"This will delete the item and all related data continue?"})]}),e.jsxs(I,{children:[e.jsx($,{children:"Cancel"}),e.jsxs(H,{variant:"destructive",disabled:a,onClick:y,children:[a&&e.jsx(C,{className:"animate-spin"}),"Delete"]})]})]})})]})]})}export{qe as default};
