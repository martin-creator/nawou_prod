import{K as M,m as k,r as p,j as e,L,A as z}from"./app-DeD98bGp.js";import{D as O}from"./data-table-CSGdLzCL.js";import{E as _}from"./empty-state-TvxrC41A.js";import{A as w,a as B,b as F,c as K,d as P,e as q,f as I,g as $,E as H,P as R}from"./alert-dialog-DQwKdSyS.js";import{B as x}from"./button-Ct9n9CgN.js";import{D as V,a as U,b as G,c as J}from"./dialog-B_lECN7v.js";import{D as Q,a as W,b as X,c as f,d as Y}from"./dropdown-menu-otaTuwUL.js";import{I as D}from"./input-lEC92rHn.js";import{L as h}from"./label-rbthaOrs.js";import{T as Z}from"./textarea-BbI2PqbH.js";import{T as ee,a as se,b as ie,c as ae}from"./tooltip-CyhGefgI.js";import{A as te}from"./app-layout-BeTzi4lX.js";import{t as n}from"./sonner-k2FkUgcW.js";import{C}from"./circle-plus-Ck5o8W7K.js";import{L as N}from"./loader-circle-Bp4GwYd4.js";import{E as re}from"./external-link-DENsHKgh.js";import{T as le}from"./trash-2-DM9UYcSD.js";/* empty css            */import"./index-CDvxkt6i.js";import"./index-pDgKLu7p.js";import"./index-CadNF0rr.js";import"./index-B70TmmqK.js";import"./index-CMBCMJjx.js";import"./index-Bz0yng1I.js";import"./index-k0Bvs0rA.js";import"./use-mobile-CYeYL97D.js";import"./chevron-right-9kIw7drQ.js";const ne=[{title:"Dashboard",href:"/panel"},{title:"Training Manuals",href:"/training_manuals"}];function we(){const{training_manuals:c}=M().props,{data:v,setData:o,post:b,processing:a,reset:d,delete:y}=k({file:null,image:null,title:"",description:""}),[A,r]=p.useState(!1),[E,j]=p.useState(!1),[l,g]=p.useState(null),[u,m]=p.useState(null),T=s=>{s.preventDefault(),u?b(route("training_manuals.update",{id:u}),{onSuccess:()=>{n.success("Training manual updated successfully!"),r(!1),d()},onError:i=>{for(const t in i)n.error(`${t} error`,{description:i[t],closeButton:!0,className:"capitalize"})},onFinish:()=>{g(null),m(null)}}):l?y(route("training_manuals",{id:l==null?void 0:l.id}),{onSuccess:()=>{n.success("Training manual deleted successfully!"),r(!1),d(),j(!1)},onError:i=>{for(const t in i)n.error(`${t} error`,{description:i[t],closeButton:!0,className:"capitalize"})},onFinish:()=>{g(null),m(null)}}):b(route("training_manuals"),{onSuccess:()=>{n.success("Saved!",{description:"Training manual has been saved successfully.",closeButton:!0}),r(!1),d()},onError:i=>{for(const t in i)n.error(`${t} error`,{description:i[t],closeButton:!0,className:"capitalize"})}})},S=[{accessorKey:"id",header:()=>e.jsx("div",{className:"text-center",children:"#"}),cell:({row:s})=>e.jsxs("div",{className:"text-center font-medium",children:[s.index+1,"."]})},{accessorKey:"title",header:()=>e.jsx("div",{className:"text-left",children:"Title"}),cell:({row:s})=>{var i;return e.jsxs("div",{className:"flex cursor-pointer items-center gap-2",children:[s.original.image?e.jsx("img",{src:(i=s.original)==null?void 0:i.image,alt:"",className:"h-10 w-10 rounded-lg"}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"text-left font-medium",children:s.original.title})]})}},{accessorKey:"description",header:()=>e.jsx("div",{className:"text-left",children:"Description"}),cell:({row:s})=>{var i;return e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(ie,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer truncate text-left",children:(i=s.getValue("description"))==null?void 0:i.substring(0,50)})}),e.jsx(ae,{className:"max-h-[250px] overflow-auto p-3",children:e.jsx("p",{children:s.getValue("description")})})]})})}},{accessorKey:"updated_at",header:()=>e.jsx("div",{className:"text-left",children:"Last Updated"}),cell:({row:s})=>e.jsx("div",{className:"text-left font-medium",children:new Date(s.original.updated_at).toLocaleString()})},{id:"actions",enableHiding:!0,cell:({row:s})=>e.jsxs(Q,{children:[e.jsx(W,{asChild:!0,children:e.jsxs(x,{variant:"outline",className:"h-5 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(H,{})]})}),e.jsxs(X,{align:"end",children:[e.jsx("a",{href:s.original.file,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(f,{children:[e.jsx(re,{}),"Open"]})}),e.jsxs(f,{onClick:()=>{o(s.original),m(s.original.id),r(!0)},children:[e.jsx(R,{}),"Edit"]}),e.jsx(Y,{}),e.jsxs(f,{onClick:()=>{g(s.original),j(!0)},children:[e.jsx(le,{}),"Delete"]})]})]})}];return e.jsxs(te,{breadcrumbs:ne,children:[e.jsx(L,{title:"Training Manuals"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsx(z,{data:"training_manuals",fallback:"Loading...",children:(c==null?void 0:c.length)>0?e.jsx(O,{columns:S,data:c,searchableColumn:"title",placeholder:"Search title...",type:"Training Manuals",actions:e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>{r(!0)},children:[e.jsx(C,{})," Create"]})}):e.jsx(_,{actions:e.jsxs(x,{variant:"outline",onClick:()=>r(!0),children:[e.jsx(C,{})," Create New"]})})})}),e.jsx(V,{open:A,onOpenChange:s=>{r(s),s==!1&&(d(),m(null))},children:e.jsxs(U,{children:[e.jsxs(G,{children:[u?"Editing":"Add"," Media"]}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{className:"capitalize",children:"Title"}),e.jsx(D,{type:"text",disabled:a,value:v.title,onChange:s=>o("title",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(h,{className:"capitalize",children:"Description"}),e.jsx(Z,{disabled:a,value:v.description,onChange:s=>o("description",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(h,{className:"capitalize",children:"Training Manual File"}),e.jsx(D,{type:"file",disabled:a,onChange:s=>o("file",s.target.files[0]),accept:".pdf,.doc,.docx",required:!u})]}),e.jsxs("div",{children:[e.jsx(h,{className:"capitalize",children:"Thumbnail (Optional)"}),e.jsx(D,{disabled:a,type:"file",onChange:s=>o("image",s.target.files[0]),accept:"image/*"})]}),e.jsx(J,{children:e.jsxs(x,{type:"submit",disabled:a,children:[a&&e.jsx(N,{className:"h-4 w-4 animate-spin"}),"Submit"]})})]})]})}),e.jsx(w,{open:E,onOpenChange:j,children:e.jsxs(B,{children:[e.jsxs(F,{children:[e.jsxs(K,{children:['Delete "',e.jsx("b",{children:l==null?void 0:l.year}),' Report"?']}),e.jsx(P,{children:"This will delete the item and all related data continue?"})]}),e.jsxs(q,{children:[e.jsx(I,{children:"Cancel"}),e.jsxs($,{variant:"destructive",disabled:a,onClick:T,children:[a&&e.jsx(N,{className:"animate-spin"}),"Delete"]})]})]})})]})}export{we as default};
