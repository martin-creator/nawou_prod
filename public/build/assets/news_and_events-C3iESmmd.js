import{K as L,m as k,r as g,j as e,L as K,A as M}from"./app-DH5o8IYu.js";import{D as V}from"./data-table-cgjqCbXD.js";import{E as F}from"./empty-state-B3W3qtNm.js";import{A as O,a as $,b as B,c as z,d as I,e as P,f as q,g as H,E as R,P as U}from"./alert-dialog-BdgBGS1G.js";import{B as f}from"./button-BdQDpV3Z.js";import{D as G,a as J,b as Q,c as W}from"./dialog-BhPclIIs.js";import{D as X,a as Y,b as Z,c as D,d as ee}from"./dropdown-menu-CLJbZR0I.js";import{I as u}from"./input-Dn46T836.js";import{L as c}from"./label-BU5T7TkJ.js";import{S as se,a as te,b as ae,c as ie,d as N}from"./select-D7WKKdAV.js";import{T as le}from"./textarea-BpCUXJWm.js";import{T as re,a as ne,b as oe,c as ce}from"./tooltip-Du8cFeyp.js";import{A as de}from"./app-layout-CQ0AETpo.js";import{t as d}from"./sonner-B0VlLR5N.js";import{C as b}from"./circle-plus-CmY6TQG7.js";import{L as C}from"./loader-circle-i3RD8S8C.js";import{T as pe}from"./trash-2-NWU3BuHZ.js";/* empty css            */import"ziggy-js";import"./index-D5X5_gsJ.js";import"./index-CNncZS_b.js";import"./index-Cb0gIXTF.js";import"./index-DOZPO_ue.js";import"./index-x6vK-Jls.js";import"./index-Cpx0AJM2.js";import"./index-ByZUqap7.js";import"./index-BdwqeO2O.js";import"./chevron-down-225L6c50.js";import"./check-CL1IHJ8O.js";import"./use-mobile-DBp9Z0jL.js";import"./chevron-right-Bvj8k7W_.js";const ue=[{title:"Dashboard",href:"/panel"},{title:"News & Events",href:"/news-and-events"}];function He(){const{news_and_events:m}=L().props,{data:i,setData:l,post:w,patch:E,delete:S,processing:a,reset:x}=k({title:"",description:"",image:null,type:"news",event_date:"",location:"",register_link:""}),[T,n]=g.useState(!1),[A,v]=g.useState(!1),[o,h]=g.useState(null),[j,p]=g.useState(null),y=s=>{s.preventDefault(),j?E(route("news_and_events",{id:j}),{onSuccess:()=>{d.success(`Data for ${i.type} updated successfully!`),n(!1),x()},onError:t=>{for(const r in t)d.error(`${r} error`,{description:t[r],closeButton:!0,className:"capitalize"})},onFinish:()=>{h(null),p(null)}}):o?S(route("news_and_events",{id:o==null?void 0:o.id}),{onSuccess:()=>{d.success(`Data for ${i.type} deleted successfully!`),n(!1),x(),v(!1)},onError:t=>{for(const r in t)d.error(`${r} error`,{description:t[r],closeButton:!0,className:"capitalize"})},onFinish:()=>{h(null),p(null)}}):w(route("news_and_events"),{onSuccess:()=>{d.success(`Data for ${i.type} added successfully!`),n(!1),x()},onError:t=>{for(const r in t)d.error(`${r} error`,{description:t[r],closeButton:!0,className:"capitalize"})},onFinish:()=>{h(null),p(null)}})},_=[{accessorKey:"id",header:()=>e.jsx("div",{className:"text-center",children:"#"}),cell:({row:s})=>e.jsxs("div",{className:"text-center font-medium",children:[s.index+1,"."]})},{accessorKey:"title",header:()=>e.jsx("div",{className:"text-left",children:"Name"}),cell:({row:s})=>{var t;return e.jsxs("div",{className:"flex cursor-pointer items-center gap-2",children:[e.jsx("img",{src:(t=s.original)==null?void 0:t.image,alt:"",className:"h-10 w-10 rounded-lg"}),e.jsx("div",{className:"text-left font-medium",children:s.getValue("title")})]})}},{accessorKey:"description",header:()=>e.jsx("div",{className:"text-left",children:"Description"}),cell:({row:s})=>{var t;return e.jsx(re,{children:e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer truncate text-left",children:(t=s.getValue("description"))==null?void 0:t.substring(0,50)})}),e.jsx(ce,{className:"max-h-[250px] overflow-auto p-3",children:e.jsx("p",{children:s.getValue("description")})})]})})}},{accessorKey:"type",header:()=>e.jsx("div",{className:"text-left",children:"Type"}),cell:({row:s})=>e.jsx("div",{className:"truncate text-left",children:s.getValue("type")=="news"?"News":"Event"})},{accessorKey:"event_date",header:()=>e.jsx("div",{className:"text-left",children:"Event Date"}),cell:({row:s})=>e.jsx("div",{className:"truncate text-left",children:s.original.type=="events"?new Date(s.getValue("event_date")).toLocaleString():""})},{accessorKey:"location",header:()=>e.jsx("div",{className:"text-left",children:"Location"})},{accessorKey:"updated_at",header:()=>e.jsx("div",{className:"text-left",children:"Last Updated"}),cell:({row:s})=>e.jsx("div",{className:"text-left font-medium",children:new Date(s.original.updated_at).toLocaleString()})},{id:"actions",enableHiding:!0,cell:({row:s})=>e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"h-5 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(R,{})]})}),e.jsxs(Z,{align:"end",children:[e.jsxs(D,{onClick:()=>{l(s.original),p(s.original.id),n(!0)},children:[e.jsx(U,{}),"Edit"]}),e.jsx(ee,{}),e.jsxs(D,{onClick:()=>{h(s.original),v(!0)},children:[e.jsx(pe,{}),"Delete"]})]})]})}];return e.jsxs(de,{breadcrumbs:ue,children:[e.jsx(K,{title:"News & Events"}),e.jsx("div",{className:"flex flex-col gap-4 p-4",children:e.jsx(M,{data:"news_and_events",fallback:"Loading...",children:(m==null?void 0:m.length)>0?e.jsx(V,{columns:_,data:m,searchableColumn:"title",placeholder:"Search title...",type:"news and events",actions:e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>{n(!0)},children:[e.jsx(b,{})," Create"]})}):e.jsx(F,{actions:e.jsxs(f,{variant:"outline",onClick:()=>n(!0),children:[e.jsx(b,{})," Add News or Events"]})})})}),e.jsx(G,{open:T,onOpenChange:s=>{n(s),s==!1&&(x(),p(null))},children:e.jsxs(J,{children:[e.jsxs(Q,{children:[j?"Editing":"Add"," News or Event"]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{children:"Type"}),e.jsxs(se,{value:i.type,disabled:a,onValueChange:s=>l("type",s),children:[e.jsx(te,{children:e.jsx(ae,{placeholder:"Select type"})}),e.jsxs(ie,{children:[e.jsx(N,{value:"news",children:"News"}),e.jsx(N,{value:"events",children:"Event"})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Title"}),e.jsx(u,{type:"text",disabled:a,value:i.title,onChange:s=>l("title",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Thumbnail"}),e.jsx(u,{type:"file",accept:"image/*",disabled:a,onChange:s=>l("image",s.target.files[0]),required:!j})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Description"}),e.jsx(le,{type:"text",disabled:a,value:i.description,onChange:s=>l("description",s.target.value),required:!0})]}),i.type==="events"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(c,{children:"Event Date"}),e.jsx(u,{type:"datetime-local",disabled:a,value:i.event_date,onChange:s=>l("event_date",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Location"}),e.jsx(u,{type:"text",disabled:a,value:i.location,onChange:s=>l("location",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Register Link (Optional)"}),e.jsx(u,{type:"url",disabled:a,value:i.register_link,onChange:s=>l("register_link",s.target.value)})]})]}),e.jsx(W,{children:e.jsxs(f,{type:"submit",disabled:a,children:[a&&e.jsx(C,{className:"h-4 w-4 animate-spin"}),"Submit"]})})]})]})}),e.jsx(O,{open:A,onOpenChange:v,children:e.jsxs($,{children:[e.jsxs(B,{children:[e.jsxs(z,{children:['Delete "',e.jsx("b",{children:o==null?void 0:o.title}),'"?']}),e.jsx(I,{children:"This will delete the item and all related data continue?"})]}),e.jsxs(P,{children:[e.jsx(q,{children:"Cancel"}),e.jsxs(H,{variant:"destructive",disabled:a,onClick:y,children:[a&&e.jsx(C,{className:"animate-spin"}),"Delete"]})]})]})})]})}export{He as default};
