import{K as k,m as M,r as u,j as e,L as B,A as K}from"./app-CjojL7o4.js";import{D as O}from"./data-table-DfzsTp3c.js";import{E as z}from"./empty-state-BPIhuMHa.js";import{A as P,a as V,b as $,c as H,d as U,e as _,f as I,g as R,E as G,P as J}from"./alert-dialog-xSuUN_1u.js";import{B as p}from"./button-spm6lUZt.js";import{D as W,a as X,b as Y,c as Z}from"./dialog-DWCYBot6.js";import{D as ee,a as se,b as te,c as A,d as ae}from"./dropdown-menu-DFrwRntd.js";import{L as D}from"./label-CHU0coym.js";import{T as b}from"./textarea-C3eM8F07.js";import{T as C,a as v,b as N,c as w}from"./tooltip-F5MKh358.js";import{A as re}from"./layout-B06tMYGQ.js";import{A as ie}from"./app-layout-BJ3c8a2H.js";import{t as n}from"./sonner-Cfn8jJHe.js";import{C as y}from"./circle-plus-CR_Nagd5.js";import{L as T}from"./loader-circle-DB9Bem-8.js";import{T as le}from"./trash-2-bTvAafOo.js";/* empty css            */import"./input-DAFae20J.js";import"./index-Bxj-7aYd.js";import"./index-B9vvPJFE.js";import"./index-aZ5NweBy.js";import"./index-W549pnCZ.js";import"./index-Ca_Fi7Ld.js";import"./index-bUXnhzLG.js";import"./index-bRVrMJT5.js";import"./use-mobile-D_DsnGmE.js";import"./chevron-right-BgbkiVcS.js";const ne=[{title:"Dashboard",href:"/panel"},{title:"FAQs",href:"/panel/about/faqs"}];function Me(){const{faqs:o}=k().props,{data:j,setData:m,post:q,processing:l,reset:c,patch:S,delete:F}=M({question:"",answer:""}),[E,r]=u.useState(!1),[L,x]=u.useState(!1),[i,h]=u.useState(null),[f,d]=u.useState(null),g=s=>{s.preventDefault(),f?S(route("faqs",{id:f}),{onSuccess:()=>{n.success("FAQ updated successfully!"),r(!1),c()},onError:t=>{for(const a in t)n.error(`${a} error`,{description:t[a],closeButton:!0,className:"capitalize"})},onFinish:()=>{h(null),d(null)}}):i?F(route("faqs",{id:i==null?void 0:i.id}),{onSuccess:()=>{n.success("FAQ deleted successfully!"),r(!1),c(),x(!1)},onError:t=>{for(const a in t)n.error(`${a} error`,{description:t[a],closeButton:!0,className:"capitalize"})},onFinish:()=>{h(null),d(null)}}):q(route("faqs"),{onSuccess:()=>{n.success("FAQ added successfully!"),r(!1),c()},onError:t=>{for(const a in t)n.error(`${a} error`,{description:t[a],closeButton:!0,className:"capitalize"})}})},Q=[{accessorKey:"id",header:()=>e.jsx("div",{className:"text-center",children:"#"}),cell:({row:s})=>e.jsxs("div",{className:"text-center font-medium",children:[s.index+1,"."]})},{accessorKey:"question",header:()=>e.jsx("div",{className:"text-left",children:"Question"}),cell:({row:s})=>{var t;return e.jsx(C,{children:e.jsxs(v,{children:[e.jsx(N,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer truncate text-left",children:(t=s.getValue("question"))==null?void 0:t.substring(0,50)})}),e.jsx(w,{className:"max-h-[250px] overflow-auto p-3 ",children:e.jsx("p",{className:"whitespace-pre-line",children:s.getValue("question")})})]})})}},{accessorKey:"answer",header:()=>e.jsx("div",{className:"text-left",children:"Answer"}),cell:({row:s})=>{var t;return e.jsx(C,{children:e.jsxs(v,{children:[e.jsx(N,{asChild:!0,children:e.jsx("div",{className:"cursor-pointer truncate text-left",children:(t=s.getValue("answer"))==null?void 0:t.substring(0,50)})}),e.jsx(w,{className:"max-h-[250px] overflow-auto p-3",children:e.jsx("p",{className:"whitespace-pre-line",children:s.getValue("answer")})})]})})}},{accessorKey:"updated_at",header:()=>e.jsx("div",{className:"text-left",children:"Last Updated"}),cell:({row:s})=>e.jsx("div",{className:"text-left font-medium",children:new Date(s.original.updated_at).toLocaleString()})},{id:"actions",enableHiding:!0,cell:({row:s})=>e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"h-5 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(G,{})]})}),e.jsxs(te,{align:"end",children:[e.jsxs(A,{onClick:()=>{m(s.original),d(s.original.id),r(!0)},children:[e.jsx(J,{}),"Edit"]}),e.jsx(ae,{}),e.jsxs(A,{onClick:()=>{h(s.original),x(!0)},children:[e.jsx(le,{}),"Delete"]})]})]})}];return e.jsxs(ie,{breadcrumbs:ne,children:[e.jsx(B,{title:"FAQs"}),e.jsxs(re,{children:[e.jsx("div",{className:"flex flex-col gap-4 p-4",children:e.jsx(K,{data:"faqs",fallback:"Loading...",children:(o==null?void 0:o.length)>0?e.jsx(O,{columns:Q,data:o,searchableColumn:"question",placeholder:"Search question...",type:"FAQs",actions:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{r(!0)},children:[e.jsx(y,{})," Create"]})}):e.jsx(z,{actions:e.jsxs(p,{variant:"outline",onClick:()=>r(!0),children:[e.jsx(y,{})," Create New"]})})})}),e.jsx(W,{open:E,onOpenChange:s=>{r(s),s==!1&&(c(),d(null))},children:e.jsxs(X,{children:[e.jsx(Y,{children:"Add FAQ"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(D,{children:"Question"}),e.jsx(b,{disabled:l,value:j.question,onChange:s=>m("question",s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(D,{children:"Answer"}),e.jsx(b,{disabled:l,value:j.answer,onChange:s=>m("answer",s.target.value),required:!0})]}),e.jsx(Z,{children:e.jsxs(p,{type:"submit",disabled:l,children:[l&&e.jsx(T,{className:"h-4 w-4 animate-spin"}),"Submit"]})})]})]})}),e.jsx(P,{open:L,onOpenChange:x,children:e.jsxs(V,{children:[e.jsxs($,{children:[e.jsxs(H,{children:['Delete "',e.jsx("b",{children:i==null?void 0:i.question}),'"?']}),e.jsx(U,{children:"This will delete the item and all related data continue?"})]}),e.jsxs(_,{children:[e.jsx(I,{children:"Cancel"}),e.jsxs(R,{variant:"destructive",disabled:l,onClick:g,children:[l&&e.jsx(T,{className:"animate-spin"}),"Delete"]})]})]})})]})]})}export{Me as default};
