import{r as u,j as e,$ as y,c as x,K as w,m as L,L as k,A as I}from"./app-DH5o8IYu.js";import{C as b,c as v,a as T,b as z,d as D}from"./card-DliSKgBg.js";import{t as h}from"./sonner-B0VlLR5N.js";import{B as o,b as $}from"./button-BdQDpV3Z.js";import{T as A}from"./trash-XacnAlgG.js";import{E as B}from"./external-link-B9fizFuG.js";import{C as E}from"./checkbox-DI9vAona.js";import{D as G,a as P,b as F,c as M}from"./dialog-BhPclIIs.js";import{I as m}from"./input-Dn46T836.js";import{L as i}from"./label-BU5T7TkJ.js";import{S as O,a as V,b as _,c as H,d as g}from"./select-D7WKKdAV.js";import{A as q}from"./app-layout-CQ0AETpo.js";import{P as Y}from"./plus-DsF758tR.js";import{L as K}from"./loader-circle-i3RD8S8C.js";/* empty css            */import"ziggy-js";import"./index-D5X5_gsJ.js";import"./index-CNncZS_b.js";import"./index-BdwqeO2O.js";import"./index-ByZUqap7.js";import"./index-x6vK-Jls.js";import"./check-CL1IHJ8O.js";import"./index-Cb0gIXTF.js";import"./index-DOZPO_ue.js";import"./index-Cpx0AJM2.js";import"./dropdown-menu-CLJbZR0I.js";import"./chevron-down-225L6c50.js";import"./use-mobile-DBp9Z0jL.js";import"./tooltip-Du8cFeyp.js";import"./chevron-right-Bvj8k7W_.js";function R({item:a}){const[t,r]=u.useState(!1);return e.jsx(b,{className:"relative overflow-hidden p-0",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:e.jsxs(v,{className:"p-0",children:[a.type==="image"?e.jsx("img",{src:a.url,alt:a.caption,className:"h-40 w-full object-cover"}):e.jsx("iframe",{src:a.url,className:"h-40 w-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}),e.jsxs("div",{className:"bottom-0 left-0 flex w-full justify-between bg-white p-0",animate:t?"visible":"hidden",variants:{hidden:{opacity:0},visible:{opacity:1}},transition:{duration:.2,ease:"easeOut"},children:[e.jsx(y,{as:"button",onSuccess:()=>{h.success("Item trashed!",{description:`Your ${a.type} has been deleted from the gallery.`,closeButton:!0})},method:"delete",href:route("gallery"),data:{id:a.id},children:e.jsx(o,{variant:"link",className:"m-0 p-0",size:"sm",children:e.jsx(A,{})})}),e.jsx("a",{href:`${a.url}?preview=true`,target:"_blank",children:e.jsx(o,{variant:"link",className:"m-0 p-0",size:"sm",children:e.jsx(B,{})})})]})]})},a.id)}function J({className:a,...t}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:x("mx-auto flex w-full justify-center",a),...t})}function Q({className:a,...t}){return e.jsx("ul",{"data-slot":"pagination-content",className:x("flex flex-row items-center gap-1",a),...t})}function U({...a}){return e.jsx("li",{"data-slot":"pagination-item",...a})}function W({className:a,isActive:t,size:r="icon",...c}){return e.jsx("a",{"aria-current":t?"page":void 0,"data-slot":"pagination-link","data-active":t,className:x($({variant:t?"outline":"ghost",size:r}),a),...c})}const X=[{title:"Dashboard",href:"/panel"},{title:"Gallery",href:"/gallery"}];function Te(){const{galleries:a}=w().props,{data:t,setData:r,post:c,processing:l,reset:N}=L({url:null,caption:"",type:"image",banner_url:null}),[d,j]=u.useState("file"),[C,p]=u.useState(!1),S=s=>{s.preventDefault(),c(route("gallery"),{onSuccess:()=>{h.success("Gallery updated!",{description:`Your ${t.type} has been added to the gallery.`,closeButton:!0}),p(!1),N()},onError:n=>{for(const f in n)h.error(`${f} error`,{description:n[f],closeButton:!0,className:"capitalize"})}})};return e.jsxs(q,{breadcrumbs:X,children:[e.jsx(k,{title:"Gallery"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsx(I,{data:"galleries",fallback:"Loading...",children:e.jsx(e.Fragment,{children:e.jsxs(b,{className:"rounded-md shadow-none",children:[e.jsx(T,{className:"flex border-b pb-5",children:e.jsxs(z,{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xl",children:"Gallery"}),e.jsxs(o,{onClick:()=>p(!0),variant:"outline",size:"sm",children:[e.jsx(Y,{})," Add to gallery"]})]})}),e.jsx(v,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:a==null?void 0:a.data.map(s=>e.jsx(R,{item:s},s.id))})}),e.jsx(D,{className:"border-t pt-5",children:e.jsx(J,{children:e.jsx(Q,{children:a==null?void 0:a.links.map((s,n)=>e.jsx(U,{children:e.jsx(y,{href:s.url,method:"get",as:"button",only:["galleries"],preserveScroll:!0,prefetch:!0,children:e.jsx(W,{href:s.url,size:"sm",isActive:s.active,dangerouslySetInnerHTML:{__html:s.label}})})},n))})})})]})})})}),e.jsx(G,{open:C,onOpenChange:p,children:e.jsxs(P,{children:[e.jsx(F,{children:"Add Media"}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Type"}),e.jsxs(O,{value:t.type,disabled:l,onValueChange:s=>r("type",s),children:[e.jsx(V,{children:e.jsx(_,{placeholder:"Select type"})}),e.jsxs(H,{children:[e.jsx(g,{value:"image",children:"Image"}),e.jsx(g,{value:"video",children:"Video"})]})]})]}),e.jsxs("div",{children:[e.jsxs(i,{className:"capitalize",children:[t.type," ",d]}),e.jsx(m,{type:t.type=="video"?d:"file",accept:`${t.type}/*`,disabled:l,onChange:s=>{s.type=="file"?r("url",s.target.files[0]):r("url",s.target.value)},required:!0,className:"mb-1"}),t.type=="video"?e.jsxs(i,{className:"cursor-pointer items-center",children:[e.jsx(E,{checked:d=="url",onCheckedChange:s=>{j(s?"url":"file")}})," ","Add video link instead."]}):e.jsx(e.Fragment,{})]}),e.jsxs("div",{children:[e.jsxs(i,{className:"capitalize",children:[t.type," Caption"]}),e.jsx(m,{type:"text",disabled:l,value:t.caption,onChange:s=>r("caption",s.target.value),required:!0})]}),t.type=="video"?e.jsxs("div",{children:[e.jsxs(i,{className:"capitalize",children:[t.type," Banner (Optional)"]}),e.jsx(m,{disabled:l,type:"file",onChange:s=>r("banner_url",s.target.files[0])})]}):"",e.jsx(M,{children:e.jsxs(o,{type:"submit",disabled:l,children:[l&&e.jsx(K,{className:"h-4 w-4 animate-spin"}),"Submit"]})})]})]})})]})}export{Te as default};
